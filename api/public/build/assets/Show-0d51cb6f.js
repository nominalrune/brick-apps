import{j as e,r as x,W as g,d as w}from"./app-e8b3b534.js";import{A as N}from"./AppIcon-fe3d0041.js";import{B as d}from"./Button-f504af54.js";import{I as v}from"./Input-6a53dedd.js";import{A as S}from"./AuthenticatedLayout-a102c194.js";import{M as y}from"./index.esm-c45c066f.js";import"./app_icons-2904f611.js";import"./ApplicationLogo-05e8b71d.js";import"./transition-ac1568dd.js";function E({id:l,form:s,record:r,onSubmit:o,edit:i}){return e.jsx("form",{id:l,className:"m-4 flex flex-col gap-6",onSubmit:o,children:s.map((m,c)=>e.jsx("div",{className:"flex gap-4",children:m.map(t=>e.jsx(x.Fragment,{children:e.jsx(v,{label:t.label||"(no name)",type:t.type,name:t.code,value:r[t.code],className:"text-slate-800",prefix:t.prefix,suffix:t.suffix,readOnly:!i})},t.code))},c))})}function R({auth:l,app:s,record:r}){const[o,i]=x.useState(!1);function m(){i(!0)}const{transform:c,post:t,errors:f,delete:h}=g();async function u(a){a.preventDefault();const n=a.target;if(!(n instanceof HTMLFormElement))return;const p=Object.fromEntries(new FormData(n).entries());c(b=>p),t(`/web/${s.code}/${r.id}/edit`,{onSuccess:b=>{i(!1)}})}function j(){confirm("本当に削除しますか？")&&h(`/web/${s.code}/${r.id}`)}return e.jsxs(S,{user:l.user,header:e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx(N,{src:s.icon}),e.jsx(w,{href:`/web/${s.code}`,className:"text-xl",children:s.name}),e.jsxs("div",{className:"flex-grow flex gap-4 justify-end",children:[!o&&e.jsx(d,{type:"button",onClick:()=>m(),children:"編集"}),o&&e.jsx(d,{type:"submit",form:r.id.toString(),children:"保存"}),e.jsxs(d,{className:"pl-2 pr-2 text-white bg-red-600 hover:bg-red-500 hover:box-shadow",onClick:j,children:[e.jsx(y,{className:"text-xl"}),"削除"]})]})]}),children:[f&&e.jsx(e.Fragment,{children:Object.entries(f).map(([a,n])=>e.jsxs("div",{className:"text-red-600",children:[a,":",n]},a))}),e.jsx(E,{id:r.id.toString(),record:r,form:s.form,onSubmit:u,edit:o})]})}export{R as default};
